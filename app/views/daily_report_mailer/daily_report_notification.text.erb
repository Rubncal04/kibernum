Daily Purchase Report - <%= @date.strftime('%A, %B %d, %Y') %>
================================================================

SUMMARY
-------
Total Purchases: <%= @report_data[:summary][:total_purchases] %>
Total Revenue: $<%= number_with_precision(@report_data[:summary][:total_revenue], precision: 2) %>
Total Quantity: <%= @report_data[:summary][:total_quantity] %>
Unique Customers: <%= @report_data[:summary][:unique_customers] %>

<% if @report_data[:top_products_by_revenue].any? %>
TOP PRODUCTS BY REVENUE
-----------------------
<% @report_data[:top_products_by_revenue].each do |product_name, revenue| %>
- <%= product_name %>: $<%= number_with_precision(revenue, precision: 2) %>
<% end %>

<% end %>
<% if @report_data[:top_products_by_quantity].any? %>
TOP PRODUCTS BY QUANTITY
------------------------
<% @report_data[:top_products_by_quantity].each do |product_name, quantity| %>
- <%= product_name %>: <%= quantity %> units
<% end %>

<% end %>
<% if @report_data[:purchases_by_category].any? %>
REVENUE BY CATEGORY
-------------------
<% @report_data[:purchases_by_category].each do |category_name, revenue| %>
- <%= category_name %>: $<%= number_with_precision(revenue, precision: 2) %>
<% end %>

<% end %>
<% if @report_data[:top_customers].any? %>
TOP CUSTOMERS
-------------
<% @report_data[:top_customers].each do |customer_info, amount| %>
- <%= customer_info.split(', ')[1] %> (<%= customer_info.split(', ')[2] %>): $<%= number_with_precision(amount, precision: 2) %>
<% end %>

<% end %>
<% if @report_data[:detailed_purchases].any? %>
DETAILED PURCHASES
------------------
<% @report_data[:detailed_purchases].each do |purchase| %>
Purchase ID: <%= purchase[:id] %>
Customer: <%= purchase[:customer_name] %> (<%= purchase[:customer_email] %>)
Product: <%= purchase[:product_name] %>
Categories: <%= purchase[:categories] %>
Quantity: <%= purchase[:quantity] %>
Amount: $<%= number_with_precision(purchase[:total_amount], precision: 2) %>
Time: <%= purchase[:purchase_date].strftime('%H:%M') %>

<% end %>
<% end %>
================================================================
This report was automatically generated by the Kibernum E-commerce system.
Generated at: <%= Time.current.strftime('%Y-%m-%d %H:%M:%S %Z') %> 